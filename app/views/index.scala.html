@()

@layout("Start Page") {

<h2>Enter Your Number here:</h2>
<input type="text" id="number" name="number" /><br />
Results:<br />

<div id="results">
</div>

<script type="text/javascript">
    document.getElementById("number").onkeyup = function () {
        var number = this.value;
        if (number.length == 0) {
            return false;
        }

        var request = new XMLHttpRequest();

        request.onreadystatechange = function () {
            if (request.readyState == 4) {
                var resultsDiv = document.getElementById("results");
                while (resultsDiv.hasChildNodes()) { resultsDiv.removeChild(resultsDiv.firstChild) }

                if (request.status == 200) {
                    var resultObj = JSON.parse(request.responseText);

                    resultsDiv.appendChild(document.createTextNode(resultObj.length));
                    resultsDiv.appendChild(document.createElement("br"));

                    for (index in resultObj) {
                        if (resultObj.hasOwnProperty(index)) {
                            resultsDiv.appendChild(document.createTextNode(resultObj[index]));
                            resultsDiv.appendChild(document.createElement("br"));
                        }
                    }
                }
                else if (request.status >= 400 && request.status < 500) {
                    resultsDiv.appendChild(document.createTextNode(request.responseText));
                    resultsDiv.appendChild(document.createElement("br"));
                }
            }
        }

        request.open("GET", "/api/v1/convert/" + encodeURIComponent(number), true);
        request.send();
    }
</script>
}
